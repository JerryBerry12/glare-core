/* Copyright Glare Technologies Limited 2019 - */

__constant const uchar p_x[256] ={ (uchar)231ul, (uchar)101ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)154ul, (uchar)144ul, (uchar)45ul, (uchar)255ul, (uchar)17ul, (uchar)251ul, (uchar)226ul, (uchar)204ul, (uchar)21ul, (uchar)81ul, (uchar)49ul, (uchar)129ul, (uchar)118ul, (uchar)214ul, (uchar)174ul, (uchar)62ul, (uchar)8ul, (uchar)102ul, (uchar)35ul, (uchar)93ul, (uchar)179ul, (uchar)89ul, (uchar)246ul, (uchar)98ul, (uchar)128ul, (uchar)170ul, (uchar)171ul, (uchar)0ul, (uchar)57ul, (uchar)61ul, (uchar)111ul, (uchar)59ul, (uchar)97ul, (uchar)217ul, (uchar)203ul, (uchar)32ul, (uchar)86ul, (uchar)132ul, (uchar)65ul, (uchar)108ul, (uchar)75ul, (uchar)228ul, (uchar)235ul, (uchar)91ul, (uchar)74ul, (uchar)156ul, (uchar)215ul, (uchar)223ul, (uchar)158ul, (uchar)193ul, (uchar)30ul, (uchar)152ul, (uchar)202ul, (uchar)25ul, (uchar)77ul, (uchar)222ul, (uchar)243ul, (uchar)211ul, (uchar)183ul, (uchar)42ul, (uchar)122ul, (uchar)206ul, (uchar)233ul, (uchar)197ul, (uchar)120ul, (uchar)9ul, (uchar)54ul, (uchar)220ul, (uchar)173ul, (uchar)56ul, (uchar)16ul, (uchar)6ul, (uchar)117ul, (uchar)145ul, (uchar)12ul, (uchar)161ul, (uchar)96ul, (uchar)27ul, (uchar)178ul, (uchar)121ul, (uchar)124ul, (uchar)68ul, (uchar)131ul, (uchar)248ul, (uchar)26ul, (uchar)125ul, (uchar)199ul, (uchar)191ul, (uchar)141ul, (uchar)44ul, (uchar)67ul, (uchar)82ul, (uchar)2ul, (uchar)109ul, (uchar)112ul, (uchar)13ul, (uchar)139ul, (uchar)36ul, (uchar)107ul, (uchar)234ul, (uchar)15ul, (uchar)52ul, (uchar)187ul, (uchar)1ul, (uchar)201ul, (uchar)249ul, (uchar)113ul, (uchar)115ul, (uchar)207ul, (uchar)166ul, (uchar)254ul, (uchar)219ul, (uchar)205ul, (uchar)185ul, (uchar)64ul, (uchar)244ul, (uchar)7ul, (uchar)73ul, (uchar)90ul, (uchar)106ul, (uchar)157ul, (uchar)41ul, (uchar)11ul, (uchar)151ul, (uchar)164ul, (uchar)50ul, (uchar)227ul, (uchar)71ul, (uchar)236ul, (uchar)40ul, (uchar)150ul, (uchar)165ul, (uchar)46ul, (uchar)172ul, (uchar)103ul, (uchar)137ul, (uchar)63ul, (uchar)176ul, (uchar)209ul, (uchar)210ul, (uchar)238ul, (uchar)22ul, (uchar)18ul, (uchar)38ul, (uchar)140ul, (uchar)186ul, (uchar)177ul, (uchar)29ul, (uchar)23ul, (uchar)127ul, (uchar)247ul, (uchar)87ul, (uchar)100ul, (uchar)240ul, (uchar)149ul, (uchar)133ul, (uchar)230ul, (uchar)76ul, (uchar)66ul, (uchar)4ul, (uchar)78ul, (uchar)3ul, (uchar)24ul, (uchar)143ul, (uchar)148ul, (uchar)194ul, (uchar)192ul, (uchar)19ul, (uchar)14ul, (uchar)188ul, (uchar)84ul, (uchar)196ul, (uchar)212ul, (uchar)94ul, (uchar)200ul, (uchar)110ul, (uchar)224ul, (uchar)39ul, (uchar)10ul, (uchar)142ul, (uchar)47ul, (uchar)252ul, (uchar)85ul, (uchar)237ul, (uchar)168ul, (uchar)5ul, (uchar)218ul, (uchar)70ul, (uchar)104ul, (uchar)198ul, (uchar)195ul, (uchar)182ul, (uchar)241ul, (uchar)232ul, (uchar)225ul, (uchar)130ul, (uchar)53ul, (uchar)242ul, (uchar)250ul, (uchar)147ul, (uchar)20ul, (uchar)175ul, (uchar)184ul, (uchar)180ul, (uchar)69ul, (uchar)169ul, (uchar)245ul, (uchar)31ul, (uchar)119ul, (uchar)33ul, (uchar)114ul, (uchar)51ul, (uchar)92ul, (uchar)55ul, (uchar)163ul, (uchar)43ul, (uchar)58ul, (uchar)208ul, (uchar)135ul, (uchar)79ul, (uchar)37ul, (uchar)159ul, (uchar)253ul, (uchar)229ul, (uchar)88ul, (uchar)80ul, (uchar)134ul, (uchar)123ul, (uchar)136ul, (uchar)126ul, (uchar)60ul, (uchar)160ul, (uchar)213ul, (uchar)83ul, (uchar)48ul, (uchar)239ul, (uchar)153ul, (uchar)99ul, (uchar)95ul, (uchar)167ul, (uchar)216ul, (uchar)190ul, (uchar)189ul, (uchar)72ul, (uchar)146 };
__constant const uchar p_y[256] ={ (uchar)50ul, (uchar)163ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)0ul, (uchar)118ul, (uchar)7ul, (uchar)183ul, (uchar)155ul, (uchar)176ul, (uchar)210ul, (uchar)42ul, (uchar)218ul, (uchar)204ul, (uchar)142ul, (uchar)156ul, (uchar)119ul, (uchar)66ul, (uchar)101ul, (uchar)97ul, (uchar)29ul, (uchar)232ul, (uchar)149ul, (uchar)80ul, (uchar)195ul, (uchar)47ul, (uchar)63ul, (uchar)141ul, (uchar)31ul, (uchar)83ul, (uchar)38ul, (uchar)26ul, (uchar)217ul, (uchar)76ul, (uchar)143ul, (uchar)185ul, (uchar)152ul, (uchar)11ul, (uchar)230ul, (uchar)100ul, (uchar)244ul, (uchar)186ul, (uchar)169ul, (uchar)95ul, (uchar)193ul, (uchar)82ul, (uchar)89ul, (uchar)226ul, (uchar)99ul, (uchar)62ul, (uchar)90ul, (uchar)52ul, (uchar)33ul, (uchar)191ul, (uchar)221ul, (uchar)220ul, (uchar)4ul, (uchar)181ul, (uchar)96ul, (uchar)92ul, (uchar)5ul, (uchar)205ul, (uchar)130ul, (uchar)56ul, (uchar)207ul, (uchar)3ul, (uchar)24ul, (uchar)39ul, (uchar)30ul, (uchar)139ul, (uchar)225ul, (uchar)160ul, (uchar)122ul, (uchar)246ul, (uchar)117ul, (uchar)248ul, (uchar)213ul, (uchar)237ul, (uchar)41ul, (uchar)140ul, (uchar)255ul, (uchar)134ul, (uchar)121ul, (uchar)110ul, (uchar)197ul, (uchar)242ul, (uchar)251ul, (uchar)51ul, (uchar)40ul, (uchar)78ul, (uchar)60ul, (uchar)32ul, (uchar)79ul, (uchar)57ul, (uchar)178ul, (uchar)45ul, (uchar)151ul, (uchar)36ul, (uchar)241ul, (uchar)14ul, (uchar)27ul, (uchar)254ul, (uchar)224ul, (uchar)173ul, (uchar)223ul, (uchar)243ul, (uchar)231ul, (uchar)202ul, (uchar)209ul, (uchar)158ul, (uchar)190ul, (uchar)71ul, (uchar)104ul, (uchar)23ul, (uchar)214ul, (uchar)37ul, (uchar)55ul, (uchar)240ul, (uchar)137ul, (uchar)170ul, (uchar)219ul, (uchar)203ul, (uchar)144ul, (uchar)21ul, (uchar)13ul, (uchar)239ul, (uchar)54ul, (uchar)85ul, (uchar)77ul, (uchar)8ul, (uchar)22ul, (uchar)115ul, (uchar)28ul, (uchar)46ul, (uchar)199ul, (uchar)73ul, (uchar)126ul, (uchar)20ul, (uchar)222ul, (uchar)228ul, (uchar)235ul, (uchar)253ul, (uchar)74ul, (uchar)148ul, (uchar)88ul, (uchar)128ul, (uchar)188ul, (uchar)171ul, (uchar)216ul, (uchar)172ul, (uchar)87ul, (uchar)212ul, (uchar)12ul, (uchar)179ul, (uchar)124ul, (uchar)17ul, (uchar)167ul, (uchar)6ul, (uchar)184ul, (uchar)168ul, (uchar)112ul, (uchar)164ul, (uchar)65ul, (uchar)162ul, (uchar)98ul, (uchar)250ul, (uchar)127ul, (uchar)114ul, (uchar)48ul, (uchar)129ul, (uchar)68ul, (uchar)145ul, (uchar)81ul, (uchar)187ul, (uchar)245ul, (uchar)102ul, (uchar)135ul, (uchar)189ul, (uchar)229ul, (uchar)16ul, (uchar)91ul, (uchar)136ul, (uchar)166ul, (uchar)200ul, (uchar)43ul, (uchar)93ul, (uchar)107ul, (uchar)94ul, (uchar)157ul, (uchar)61ul, (uchar)113ul, (uchar)175ul, (uchar)161ul, (uchar)252ul, (uchar)194ul, (uchar)111ul, (uchar)196ul, (uchar)211ul, (uchar)238ul, (uchar)247ul, (uchar)64ul, (uchar)233ul, (uchar)147ul, (uchar)159ul, (uchar)9ul, (uchar)132ul, (uchar)133ul, (uchar)75ul, (uchar)84ul, (uchar)154ul, (uchar)234ul, (uchar)215ul, (uchar)34ul, (uchar)44ul, (uchar)174ul, (uchar)70ul, (uchar)35ul, (uchar)236ul, (uchar)2ul, (uchar)108ul, (uchar)49ul, (uchar)123ul, (uchar)192ul, (uchar)109ul, (uchar)120ul, (uchar)153ul, (uchar)201ul, (uchar)10ul, (uchar)165ul, (uchar)150ul, (uchar)15ul, (uchar)105ul, (uchar)19ul, (uchar)206ul, (uchar)72ul, (uchar)125ul, (uchar)227ul, (uchar)53ul, (uchar)67ul, (uchar)103ul, (uchar)138ul, (uchar)131ul, (uchar)59ul, (uchar)116ul, (uchar)1ul, (uchar)198ul, (uchar)18ul, (uchar)177ul, (uchar)106 };
__constant const uchar p_z[256] ={ (uchar)139ul, (uchar)47ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)1ul, (uchar)59ul, (uchar)159ul, (uchar)232ul, (uchar)248ul, (uchar)94ul, (uchar)251ul, (uchar)176ul, (uchar)186ul, (uchar)224ul, (uchar)249ul, (uchar)234ul, (uchar)116ul, (uchar)164ul, (uchar)83ul, (uchar)180ul, (uchar)172ul, (uchar)236ul, (uchar)101ul, (uchar)141ul, (uchar)167ul, (uchar)245ul, (uchar)214ul, (uchar)34ul, (uchar)63ul, (uchar)133ul, (uchar)120ul, (uchar)191ul, (uchar)179ul, (uchar)27ul, (uchar)243ul, (uchar)90ul, (uchar)97ul, (uchar)222ul, (uchar)37ul, (uchar)117ul, (uchar)45ul, (uchar)237ul, (uchar)92ul, (uchar)184ul, (uchar)61ul, (uchar)100ul, (uchar)67ul, (uchar)188ul, (uchar)10ul, (uchar)2ul, (uchar)142ul, (uchar)58ul, (uchar)165ul, (uchar)144ul, (uchar)255ul, (uchar)8ul, (uchar)85ul, (uchar)108ul, (uchar)87ul, (uchar)12ul, (uchar)121ul, (uchar)28ul, (uchar)231ul, (uchar)41ul, (uchar)52ul, (uchar)14ul, (uchar)254ul, (uchar)95ul, (uchar)201ul, (uchar)15ul, (uchar)81ul, (uchar)244ul, (uchar)72ul, (uchar)242ul, (uchar)119ul, (uchar)74ul, (uchar)93ul, (uchar)246ul, (uchar)9ul, (uchar)32ul, (uchar)17ul, (uchar)118ul, (uchar)64ul, (uchar)68ul, (uchar)161ul, (uchar)38ul, (uchar)154ul, (uchar)235ul, (uchar)247ul, (uchar)103ul, (uchar)55ul, (uchar)220ul, (uchar)84ul, (uchar)162ul, (uchar)205ul, (uchar)69ul, (uchar)111ul, (uchar)228ul, (uchar)173ul, (uchar)70ul, (uchar)211ul, (uchar)49ul, (uchar)56ul, (uchar)130ul, (uchar)35ul, (uchar)140ul, (uchar)230ul, (uchar)82ul, (uchar)208ul, (uchar)131ul, (uchar)153ul, (uchar)89ul, (uchar)212ul, (uchar)170ul, (uchar)209ul, (uchar)3ul, (uchar)174ul, (uchar)73ul, (uchar)177ul, (uchar)21ul, (uchar)157ul, (uchar)233ul, (uchar)44ul, (uchar)31ul, (uchar)24ul, (uchar)148ul, (uchar)23ul, (uchar)134ul, (uchar)30ul, (uchar)113ul, (uchar)185ul, (uchar)33ul, (uchar)169ul, (uchar)43ul, (uchar)218ul, (uchar)88ul, (uchar)158ul, (uchar)122ul, (uchar)238ul, (uchar)182ul, (uchar)216ul, (uchar)168ul, (uchar)54ul, (uchar)151ul, (uchar)240ul, (uchar)225ul, (uchar)40ul, (uchar)124ul, (uchar)199ul, (uchar)62ul, (uchar)114ul, (uchar)155ul, (uchar)98ul, (uchar)227ul, (uchar)197ul, (uchar)145ul, (uchar)0ul, (uchar)1ul, (uchar)20ul, (uchar)6ul, (uchar)66ul, (uchar)79ul, (uchar)239ul, (uchar)126ul, (uchar)210ul, (uchar)19ul, (uchar)11ul, (uchar)13ul, (uchar)200ul, (uchar)75ul, (uchar)60ul, (uchar)123ul, (uchar)193ul, (uchar)76ul, (uchar)48ul, (uchar)171ul, (uchar)129ul, (uchar)147ul, (uchar)99ul, (uchar)138ul, (uchar)156ul, (uchar)198ul, (uchar)150ul, (uchar)96ul, (uchar)86ul, (uchar)50ul, (uchar)39ul, (uchar)253ul, (uchar)36ul, (uchar)135ul, (uchar)241ul, (uchar)146ul, (uchar)5ul, (uchar)26ul, (uchar)204ul, (uchar)127ul, (uchar)109ul, (uchar)29ul, (uchar)213ul, (uchar)91ul, (uchar)229ul, (uchar)53ul, (uchar)152ul, (uchar)7ul, (uchar)128ul, (uchar)223ul, (uchar)181ul, (uchar)202ul, (uchar)115ul, (uchar)187ul, (uchar)4ul, (uchar)226ul, (uchar)163ul, (uchar)143ul, (uchar)136ul, (uchar)105ul, (uchar)22ul, (uchar)137ul, (uchar)190ul, (uchar)46ul, (uchar)250ul, (uchar)25ul, (uchar)207ul, (uchar)71ul, (uchar)51ul, (uchar)107ul, (uchar)132ul, (uchar)203ul, (uchar)42ul, (uchar)18ul, (uchar)16ul, (uchar)110ul, (uchar)183ul, (uchar)252ul, (uchar)192ul, (uchar)206ul, (uchar)65ul, (uchar)219ul, (uchar)194ul, (uchar)104ul, (uchar)166ul, (uchar)106ul, (uchar)78ul, (uchar)102ul, (uchar)112ul, (uchar)80ul, (uchar)175ul, (uchar)217ul, (uchar)149ul, (uchar)160 };
__constant const float data[256] ={ 0.34415323f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.72050744f, 0.47474003f, 0.7569203f, 0.25989518f, 0.77254975f, 0.520078f, 0.66756207f, 0.5099059f, 0.71509403f, 0.31898686f, 0.6573044f, 0.115368806f, 0.9590227f, 0.5796784f, 0.5349398f, 0.2706626f, 0.09938849f, 0.7359693f, 0.9301729f, 0.8498099f, 0.21591035f, 0.48417944f, 0.5923918f, 0.7341478f, 0.4070767f, 0.14117339f, 0.62158716f, 0.7490739f, 0.29232275f, 0.15538433f, 0.49380538f, 0.020031735f, 0.2778989f, 0.9813741f, 0.69009155f, 0.92465436f, 0.5464185f, 0.42806402f, 0.6284504f, 0.8227475f, 0.18561779f, 0.29694644f, 0.18239188f, 0.9342667f, 0.46367094f, 0.5630441f, 0.25374174f, 0.2487174f, 0.22288767f, 0.0700607f, 0.4237952f, 0.26832765f, 0.2034572f, 0.22999275f, 0.50689644f, 0.5118959f, 0.088614136f, 0.697741f, 0.699507f, 0.3629242f, 0.31103137f, 0.64980036f, 0.64591384f, 0.6200234f, 0.7656362f, 0.4870875f, 0.31636274f, 0.63160235f, 0.9721095f, 0.95323557f, 0.58658344f, 0.024618486f, 0.6076993f, 0.4010892f, 0.8003357f, 0.7101053f, 0.49820548f, 0.67090935f, 0.13840117f, 0.1306922f, 0.33377397f, 0.816049f, 0.53527266f, 0.17110452f, 0.2102719f, 0.833082f, 0.99547666f, 0.06404987f, 0.8557425f, 0.878643f, 0.1593779f, 0.49020725f, 0.26249042f, 0.001628992f, 0.379373f, 0.08325498f, 0.23475917f, 0.3948579f, 0.41371268f, 0.17309931f, 0.41913643f, 0.693352f, 0.5304391f, 0.32922047f, 0.8281868f, 0.19880706f, 0.007801503f, 0.910971f, 0.8554583f, 0.83956814f, 0.43580434f, 0.92780805f, 0.661549f, 0.2555148f, 0.7288218f, 0.76289594f, 0.031823266f, 0.16784477f, 0.6352487f, 0.8908828f, 0.4781799f, 0.43974265f, 0.9454149f, 0.86004823f, 0.3407114f, 0.9043291f, 0.10499264f, 0.61230785f, 0.44380444f, 0.88853246f, 0.14819972f, 0.86772317f, 0.9496381f, 0.86512685f, 0.42989594f, 0.056037348f, 0.8954311f, 0.044517893f, 0.37462255f, 0.78252596f, 0.7431134f, 0.7035732f, 0.039423198f, 0.07976248f, 0.80355096f, 0.28821608f, 0.91766804f, 0.57346636f, 0.46574616f, 0.88553447f, 0.34794283f, 0.32538474f, 0.24383245f, 0.09454864f, 0.3761241f, 0.07241725f, 0.6553251f, 0.9618993f, 0.21109006f, 0.30761775f, 0.9013885f, 0.5182179f, 0.4150998f, 0.5603437f, 0.3390206f, 0.84644884f, 0.04760258f, 0.8104322f, 0.015361552f, 0.96524274f, 0.10948198f, 0.6435584f, 0.59906745f, 0.71464646f, 0.45295522f, 0.7779411f, 0.3636569f, 0.8060831f, 0.17614375f, 0.9786673f, 0.639249f, 0.8739952f, 0.73976487f, 0.28393164f, 0.44588566f, 0.7240442f, 0.14921133f, 0.1266301f, 0.58413446f, 0.11980651f, 0.2024576f, 0.8260445f, 0.162953f, 0.973784f, 0.4580507f, 0.29458022f, 0.91816133f, 0.24059792f, 0.061209947f, 0.8796561f, 0.010626268f, 0.5504039f, 0.46914974f, 0.031246252f, 0.60292095f, 0.5254488f, 0.19478524f, 0.93757766f, 0.9865345f, 0.7930039f, 0.03607847f, 0.8193929f, 0.10636554f, 0.13499488f, 0.052296527f, 0.32323503f, 0.99718094f, 0.38332042f, 0.50019515f, 0.38876873f, 0.6834564f, 0.68363935f, 0.7911213f, 0.39070064f, 0.3573017f, 0.56989115f, 0.75352883f, 0.6735472f, 0.2194134f, 0.9920612f, 0.76005346f, 0.7758482f, 0.015625447f, 0.35331208f, 0.5413537f, 0.40592524f, 0.94295436f, 0.55522454f, 0.57569367f, 0.091892764f, 0.27466998f, 0.233088f, 0.12466391f };


float f(int x, int y, int z)
{
	const int a  = p_x[x & 0xFF];
	const int b  = p_y[y & 0xFF];
	const int c  = p_z[z & 0xFF];

	return data[a ^ b ^ c];
}


__kernel void testKernel(
	__global int* result,
	float x
	)
{
	for(int i=0; i<16; ++i) // bug only happens when this loop has enough iterations.
	{
		result[0] = 1;
		
		// Prints
		// (int)x: -4, f((int)x, (int)x, (int)x): 0.344153
		// but should print
		// (int)x: -4, f((int)x, (int)x, (int)x): 0.469150
		printf("(int)x: %i, f((int)x, (int)x, (int)x): %f \n", (int)x, f((int)x, (int)x, (int)x));

		result[0] = 0;
	}
}
